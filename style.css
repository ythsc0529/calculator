@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');

:root {
    --primary-color: #8B4513; --secondary-color: #F5DEB3; --background-color: #F0F0E0; --table-color: #006400;
    --text-color: #333; --white-color: #FFFFFF; --disabled-color: #aaaaaa; --gold-color: #FFD700;
    --border-radius: 12px; --box-shadow: 0 4px 15px rgba(0,0,0,0.1); --transition-speed: 0.3s;
}
body { font-family: 'Noto Sans TC', sans-serif; background-color: var(--background-color); color: var(--text-color); margin: 0; padding: 0; line-height: 1.6; }
header { background: var(--primary-color); color: var(--white-color); padding: 1rem; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); position: relative; }
.settings-icon { position: absolute; top: 50%; right: 20px; transform: translateY(-50%); font-size: 1.8rem; cursor: pointer; transition: transform var(--transition-speed) ease; }
.settings-icon:hover { transform: translateY(-50%) rotate(45deg); }
nav { margin-top: 1rem; display: flex; justify-content: center; flex-wrap: wrap; gap: 0.5rem; }
.nav-btn { background: none; border: 2px solid var(--secondary-color); color: var(--secondary-color); padding: 0.5rem 1rem; margin: 0 0.5rem; border-radius: var(--border-radius); cursor: pointer; font-size: 1rem; transition: all var(--transition-speed) ease; }
.nav-btn:hover, .nav-btn.active { background: var(--secondary-color); color: var(--primary-color); transform: translateY(-2px); }
main { padding: 2rem; max-width: 1200px; margin: 0 auto; }
.content-section { display: none; animation: fadeIn 0.5s ease; }
.content-section.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
h2, h3, h4 { color: var(--primary-color); }
h2 { border-bottom: 3px solid var(--secondary-color); padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
#calculator-input-area, .result-area, #challenge-board { background: var(--white-color); padding: 1.5rem; border-radius: var(--border-radius); box-shadow: var(--box-shadow); margin-bottom: 1.5rem; }
.hand-display { min-height: 70px; background-color: #e9e9e9; padding: 10px; border-radius: 8px; display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 1rem; border: 1px solid #ccc; }
.hand-display .mahjong-tile { width: 40px; height: auto; cursor: pointer; transition: transform 0.2s; }
.hand-display.small { min-height: auto; padding: 5px; display: inline-flex; vertical-align: middle; }
.hand-display.small .mahjong-tile { width: 35px; }
.hand-display .mahjong-tile:hover { transform: scale(1.1); }
.tile-selection-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(50px, 1fr)); gap: 8px; background: var(--white-color); padding: 1rem; border-radius: var(--border-radius); box-shadow: var(--box-shadow); }
.tile-selection-grid.small-grid { grid-template-columns: repeat(auto-fill, minmax(40px, 1fr)); gap: 5px; padding: 0.5rem; margin-top: 1rem; }
.tile-selection-grid .mahjong-tile { width: 100%; height: auto; cursor: pointer; border-radius: 5px; transition: transform 0.2s, box-shadow 0.2s; }
.tile-selection-grid .mahjong-tile:hover { transform: translateY(-5px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }
.tile-selection-grid .mahjong-tile.selected { opacity: 0.3; cursor: not-allowed; }
.tile-category { grid-column: 1 / -1; font-weight: bold; margin-top: 1rem; color: var(--primary-color); }
.calculator-controls, .challenge-options { display: flex; gap: 1rem; margin-bottom: 1rem; align-items: center; }
button { background-color: var(--primary-color); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: background-color var(--transition-speed); }
button:hover { background-color: #a0522d; }
button:disabled { background-color: #ccc; cursor: not-allowed; }
.result-area h3, .result-area h4 { margin-top: 0; }
.result-group { margin-bottom: 1rem; animation: slideInUp 0.4s ease; }
@keyframes slideInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.result-group .tile-group { display: flex; gap: 5px; align-items: center; flex-wrap: wrap; }
.result-group .mahjong-tile, #challenge-feedback .mahjong-tile { width: 35px; height: auto; }
.challenge-mode-btn.active { background-color: var(--secondary-color); color: var(--primary-color); font-weight: bold; }
#challenge-answer-area { margin-top: 1rem; }
#challenge-answer-area .mahjong-tile { width: 40px; height: auto; cursor: pointer; margin: 2px; border: 2px solid transparent; border-radius: 4px; }
#challenge-answer-area .mahjong-tile.selected { border-color: #ff4500; }
.player-setup, .stake-setup { margin-bottom: 1rem; }
.player-setup input, #stake-select { padding: 8px; border: 1px solid #ccc; border-radius: 5px; margin-right: 10px; }
.mahjong-table { position: relative; width: 600px; height: 600px; background-color: var(--table-color); border: 20px solid var(--primary-color); border-radius: 30px; margin: 2rem auto; box-shadow: var(--box-shadow); }
.player-box { position: absolute; background-color: rgba(255, 255, 255, 0.9); padding: 1rem; border-radius: var(--border-radius); text-align: center; width: 180px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); transition: all var(--transition-speed) ease; }
.player-box h4 { margin: 0 0 10px 0; font-size: 1.5rem; }
.player-box .emoji { font-size: 2rem; margin-bottom: 5px; }
.player-box .score { font-size: 1.8rem; font-weight: bold; }
.player-box .score.positive { color: green; }
.player-box .score.negative { color: red; }
.player-box.top { top: -40px; left: 50%; transform: translateX(-50%); }
.player-box.right { right: -40px; top: 50%; transform: translateY(-50%); }
.player-box.bottom { bottom: -40px; left: 50%; transform: translateX(-50%); }
.player-box.left { left: -40px; top: 50%; transform: translateY(-50%); }
.table-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; gap: 1rem; }
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); animation: fadeIn 0.3s; }
.modal-content { background-color: #fefefe; margin: 10% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 600px; border-radius: var(--border-radius); box-shadow: 0 10px 30px rgba(0,0,0,0.3); animation: slideInDown 0.4s; position: relative; }
@keyframes slideInDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
#modal-body { padding: 1rem; max-height: 70vh; overflow-y: auto;}
#modal-body h3 { text-align: center; }
.modal-options { display: flex; flex-direction: column; gap: 1rem; margin-top: 1rem; }
.modal-options label { display: flex; align-items: center; gap: 10px; }
.modal-options button { margin-top: 1rem; width: 100%; }
.modal-text-content { text-align: left; }
.modal-text-content h4 { margin-top: 1.5rem; margin-bottom: 0.8rem; border-left: 4px solid var(--primary-color); padding-left: 10px; }
.modal-text-content ul, .modal-text-content ol { list-style-position: inside; padding-left: 5px; }
.modal-text-content li { margin-bottom: 1rem; line-height: 1.7; }
.modal-text-content strong { color: var(--primary-color); }
.modal-text-content .disclaimer { text-align: center; font-style: italic; color: #666; margin-top: 2rem; }
.settings-menu { display: flex; flex-direction: column; gap: 1px; background-color: #ddd; border-radius: 8px; overflow: hidden; margin-top: 1rem; }
.settings-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; background-color: var(--white-color); cursor: pointer; transition: background-color var(--transition-speed); }
.settings-item:hover { background-color: #f0f0f0; }
.settings-item.disabled { color: var(--disabled-color); cursor: not-allowed; background-color: #f9f9f9; }
.settings-item span:last-child { color: var(--disabled-color); }
.settings-item #theme-color-picker { border: none; background: none; width: 40px; height: 40px; cursor: pointer; padding: 0; }
.dice-roller-container { text-align: center; padding: 2rem; background: var(--white-color); border-radius: var(--border-radius); box-shadow: var(--box-shadow); }
.dice-container { display: flex; justify-content: center; gap: 20px; margin-bottom: 2rem; }
.dice { width: 80px; height: 80px; background-color: #fff; border: 2px solid var(--primary-color); border-radius: 10px; display: flex; justify-content: center; align-items: center; font-size: 2.5rem; font-weight: bold; color: var(--primary-color); box-shadow: 3px 3px 5px rgba(0,0,0,0.2); }
#roll-dice-btn { padding: 12px 30px; font-size: 1.2rem; margin-bottom: 1rem; }
#dice-result-area h4 { font-size: 1.5rem; margin-bottom: 0.5rem; }
#dice-result-area p { font-size: 1.2rem; margin: 0.5rem 0; }
#dice-result-area strong { color: #D2691E; font-size: 1.3em; }
.dice.rolling { animation: roll-animation 0.5s ease-in-out; }
@keyframes roll-animation { 0% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(180deg) scale(1.2); } 100% { transform: rotate(360deg) scale(1); } }
.settlement-details { margin-top: 1rem; text-align: left; }
.transaction-list { list-style: none; padding: 0; }
.transaction-list li { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #eee; font-size: 1.2rem; }
.transaction-arrow { font-weight: bold; color: var(--primary-color); }
.transaction-amount { font-weight: bold; background-color: var(--secondary-color); color: var(--primary-color); padding: 2px 8px; border-radius: 5px; }
/* 招財神樣式 */
.fortune-card, .summon-altar { background: var(--white-color); padding: 1.5rem 2rem; border-radius: var(--border-radius); box-shadow: var(--box-shadow); margin-bottom: 2rem; text-align: center; }
.fortune-item { display: flex; align-items: center; justify-content: center; gap: 10px; font-size: 1.2rem; margin-bottom: 1rem; }
.fortune-label { font-weight: bold; color: var(--primary-color); }
#lucky-color { width: 30px; height: 30px; border-radius: 50%; border: 1px solid #ccc; }
#wealth-index { color: var(--gold-color); font-size: 1.5rem; }
.god-of-wealth { font-size: 5rem; animation: float-god 3s ease-in-out infinite; margin-bottom: 1rem; }
@keyframes float-god { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
.summon-result-area { margin-top: 1.5rem; font-size: 1.2rem; font-weight: bold; min-height: 50px; }
.success-glow { animation: gold-glow 1.5s ease-in-out; }
@keyframes gold-glow { 0% { text-shadow: 0 0 5px #fff; } 50% { text-shadow: 0 0 20px var(--gold-color), 0 0 30px var(--gold-color); } 100% { text-shadow: 0 0 5px #fff; } }
/* 遊戲大廳 */
.ritual-game-container { display: none; margin-top: 1rem; animation: fadeIn 0.5s; }
.back-to-selection-btn { background-color: #777; float: right; margin-bottom: 10px; }
#game-selection-menu p { font-size: 1.1em; }
.game-choices { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; margin-top: 1rem; }
.game-choice-btn { font-size: 1rem; padding: 12px 10px; }
/* 拉霸機 */
.slot-machine { width: 270px; height: 100px; margin: 1.5rem auto; border: 5px solid var(--primary-color); border-radius: 10px; background: var(--secondary-color); position: relative; }
.reels-container { display: flex; width: 100%; height: 100%; overflow: hidden; }
.reel { width: 33.33%; border-right: 2px solid var(--primary-color); transform: translateY(0); }
.reel:last-child { border-right: none; }
.reel .mahjong-tile { width: 80%; height: auto; margin: 10px auto; display: block; }
.slot-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(245,222,179,0.8) 0%, rgba(245,222,179,0.1) 25%, rgba(245,222,179,0.1) 75%, rgba(245,222,179,0.8) 100%); pointer-events: none; border-radius: 5px; border-top: 3px solid white; border-bottom: 3px solid white; box-sizing: border-box; }
#spin-btn { font-size: 1.2rem; margin-top: 1rem; }
/* 好運爆爆樂 */
#game-info-bar { display: none; justify-content: space-around; background: #f0f0f0; padding: 10px; border-radius: 8px; margin: 1rem 0; font-size: 1.2rem; }
#game-info-bar strong { color: var(--primary-color); }
.whack-a-tile-board { display: none; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr); gap: 10px; width: 270px; height: 270px; margin: 1.5rem auto; background-color: var(--secondary-color); padding: 10px; border-radius: 10px; }
.whack-a-tile-hole { background-color: var(--primary-color); border-radius: 50%; overflow: hidden; position: relative; }
.whack-a-tile-hole .mahjong-tile { position: absolute; bottom: 0; left: 50%; transform: translate(-50%, 100%); width: 60%; height: auto; cursor: pointer; transition: transform 0.1s ease-out; }
.whack-a-tile-hole .mahjong-tile.up { transform: translate(-50%, 0%); }
/* 擲筊 */
.divination-blocks-container { display: flex; justify-content: center; gap: 10px; margin-top: 1rem; height: 50px; }
.block { width: 30px; height: 50px; background-color: #d33; border-radius: 25px / 30px; border: 2px solid #8b0000; position: relative; }
.block.tossing { animation: toss-animation 0.7s ease-out; }
@keyframes toss-animation { 0% { transform: translateY(0) rotate(0); } 50% { transform: translateY(-50px) rotate(180deg); } 100% { transform: translateY(0) rotate(360deg); } }
/* 神之序列 */
.offering-slots-container { display: flex; justify-content: center; gap: 10px; margin: 1.5rem 0; }
.offering-slot { width: 50px; height: 68px; border: 2px dashed var(--disabled-color); border-radius: 5px; display: flex; justify-content: center; align-items: center; font-size: 2rem; color: var(--disabled-color); background-color: #f9f9f9; }
.offering-slot img { width: 100%; height: auto; }
#reset-sequence-btn { background-color: #777; }
/* 寶牌淨化 */
.purification-tiles-container { display: flex; justify-content: center; gap: 15px; margin: 1.5rem 0; height: 70px; }
.purification-tiles-container .mahjong-tile { width: 50px; opacity: 0.4; transition: all 0.3s ease; }
.purification-tiles-container .mahjong-tile.purifying { opacity: 1; cursor: pointer; transform: scale(1.1); box-shadow: 0 0 20px var(--gold-color), 0 0 30px var(--gold-color); animation: pulse-glow 1s infinite; }
.purification-tiles-container .mahjong-tile.purified { opacity: 1; border: 2px solid var(--gold-color); box-shadow: 0 0 10px var(--gold-color); }
@keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px var(--gold-color); } 50% { box-shadow: 0 0 35px var(--gold-color); } }
#purification-progress-container { height: 10px; background-color: #eee; border-radius: 5px; overflow: hidden; margin: 1rem auto; max-width: 300px; opacity: 0; transition: opacity 0.3s; }
#purification-progress-container.visible { opacity: 1; }
#purification-progress-bar { width: 0%; height: 100%; background-color: var(--gold-color); transition: width 0.1s linear; }
/* 金龍吐珠 */
#dragon-pearl-board { position: relative; width: 300px; height: 250px; background-color: #add8e6; margin: 1rem auto; border: 3px solid var(--primary-color); overflow: hidden; }
#dragon-pearl-dragon { position: absolute; top: 10px; left: 0; width: 50px; height: auto; animation: dragon-move 4s linear infinite alternate; }
#dragon-pearl-pearl { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); width: 35px; height: auto; cursor: pointer; }
@keyframes dragon-move { from { left: 0; } to { left: calc(100% - 50px); } }
/* 對對碰 */
#memory-match-info { font-size: 1.2rem; margin-bottom: 1rem; }
#memory-match-board { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; max-width: 300px; margin: auto; }
.memory-card { width: 60px; height: 80px; position: relative; transform-style: preserve-3d; transition: transform 0.5s; cursor: pointer; }
.memory-card .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; justify-content: center; align-items: center; }
.memory-card .card-back { background-color: var(--primary-color); border-radius: 5px; }
.memory-card .card-front { transform: rotateY(180deg); background: var(--white-color); border-radius: 5px; }
.memory-card.is-flipped { transform: rotateY(180deg); }
.memory-card .mahjong-tile { width: 80%; height: auto; }
/* 天選之人 */
#chosen-one-board { display: flex; justify-content: center; gap: 15px; height: 90px; margin-top: 1rem; }
.chosen-one-card { width: 60px; height: 85px; transition: transform 0.5s ease-in-out; cursor: pointer; }
/* 風生水起 */
#wind-rises-board { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 200px; margin: 1.5rem auto; }
.wind-tile-button { width: 90px; height: 90px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; }
.wind-tile-button.active { opacity: 1; transform: scale(1.05); box-shadow: 0 0 20px var(--gold-color); }
/* 海底撈月 */
#scoop-the-moon-board { padding: 20px 0; }
#scoop-channel { position: relative; width: 80px; height: 200px; background-color: #00008b; margin: auto; border: 5px solid #0000cd; border-top: none; }
#scoop-tile { position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%); width: 50px; height: auto; cursor: grabbing; }
/* 找牌咖 */
.lobby-actions { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; }
.join-by-id { display: flex; gap: 0.5rem; }
.join-by-id input { padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
#table-list-container { background: var(--white-color); padding: 1rem; border-radius: var(--border-radius); min-height: 200px; }
.table-entry { display: grid; grid-template-columns: 2fr 1fr 1fr; align-items: center; padding: 15px; border-bottom: 1px solid #eee; transition: background-color 0.2s; cursor: pointer; }
.table-entry:hover { background-color: #f9f9f9; }
.table-info .location { font-weight: bold; font-size: 1.1em; }
.table-info .parlor { color: #555; }
.table-details span { display: block; text-align: center; }
.table-stakes { font-weight: bold; background-color: var(--secondary-color); color: var(--primary-color); padding: 5px 10px; border-radius: 5px; }
.table-form { max-width: 500px; margin: auto; text-align: left; }
.form-group { margin-bottom: 1rem; }
.form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
.form-group input[type="text"], .form-group input[type="time"], .form-group select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
.stakes-options { display: flex; flex-wrap: wrap; gap: 10px; }
.back-to-lobby-btn { background-color: #777; }
.room-info-box { background-color: #f9f9f9; border: 1px solid #eee; border-radius: 8px; padding: 1.5rem; text-align: left; }
.room-info-box p { font-size: 1.1rem; margin: 0.5rem 0; }
.room-info-box .room-id { font-size: 1.5rem; font-weight: bold; color: var(--primary-color); text-align: center; background: var(--secondary-color); padding: 10px; border-radius: 5px; margin-top: 1rem; user-select: text; }
.chat-box {
  margin-top: 2rem;
}

.message-input {
  display: flex;
  gap: 0.5rem;
  margin-top: 1rem;
}

.message-input input {
  flex: 1;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.member-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0.5rem 0;
}

.message {
  margin: 0.5rem 0;
  padding: 0.5rem;
  border-radius: 5px;
  background: #f5f5f5;
}

.message.own-message {
  background: var(--secondary-color);
  text-align: right;
}